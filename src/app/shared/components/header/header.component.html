<!-- ======= Header ======= -->
<div class="fixed-top">
  <div class="top-main-header" *ngIf="!isMobileResolution">
    <div class="container d-flex justify-content-end pr-4">
      <ul>
        <li><a routerLink="/mission">About Us</a></li>
        <li><a routerLink="/community">Community</a></li>
        <li><a routerLink="/faq">FAQ</a></li>
        <li>
          <div *ngIf="!isMobileResolution" class="dropdown">
            <button class="dropbtn" (click)="openBlog($event)">Blog</button>
          </div>
          <a routerLink="https://tekcapsule.blog/" target="_blank" class="nav-item pe-none"
            *ngIf="isMobileResolution">Blog</a>
        </li>
      </ul>
      <button *ngIf="!(isLoggedIn$ | async)" mat-raised-button class="button signin-btn" (click)="signInUser()">
        Sign In
      </button>
      <button *ngIf="isLoggedIn$ | async" mat-raised-button class="button signin-btn" (click)="signOutUser()">
        Sign Out
      </button>
    </div>
  </div>
  <header id="header">
    <div class="container-fluid">
      <div class="container header-align">
        <!-- Responsive Menu -->
        <nav class="navbar navbar-expand-lg">
          <button #collapseBtn class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div *ngIf="
              !isMobileResolution || (isMobileResolution && selectedMenuItem?.uniqueId === 'HOME')
            " class="navbar-brand logo">
            <a routerLink="javascript:void(0)" data-toggle="collapse" data-target=".navbar-collapse.show"
              routerLinkActive="active" (click)="onMenuClick(headerMenu[0])"><img src="/assets/images/logo.svg"
                alt="Tekcapsule Logo" /></a>
          </div>
          <div class="mobile-header">
          <div class="page-name" *ngIf="isMobileResolution && selectedMenuItem?.uniqueId !== 'HOME'">
            <div class="main-nav">{{ selectedChildMenuItem?.displayName }}</div>
            <!-- <div *ngIf="selectedChildMenuItem" class="sub-nav">
              {{ selectedChildMenuItem?.displayName }}
            </div> -->
          </div>
          <div class="mobile-header-icons" *ngIf="isMobileResolution">
            <div class="header-search-icon"></div>
            <div class="header-sort-icon"></div>
            <div class="header-filter-icon"></div>
          </div>
        </div>

          <div #navbarNav id="navbarNav" class="collapse navbar-collapse nav-menu" (click)="onStopClick($event)">
            <ul class="navbar-nav" *ngIf="!isMobileResolution">
              <ng-container *ngFor="let hm of headerMenu; let i = index">
                <li [ngClass]="{
                    dropdown: (hm.viewType || isMobileResolution) && hm.children,
                    active: selectedMenuItem?.uniqueId === hm.uniqueId
                  }" *ngIf="hm.showOnMobile ? isMobileResolution : true">
                  <div *ngIf="!isMobileResolution" class="dropdown">
                    <button class="dropbtn" (click)="onMenuClick(hm)">
                      {{ hm.displayName }}
                      <i *ngIf="hm.viewType === 'ALL' && hm.children" class="arrow down"
                        [ngClass]="{ 'menu-open': openedMenuItem?.uniqueId === hm.uniqueId }"></i>
                    </button>
                  </div>
                  <!-- <a
                    routerLink="Javascript:void(0)"
                    class="nav-item pe-none"
                    *ngIf="isMobileResolution"
                    [ngClass]="{ 'parent-menu': isMobileResolution && hm.children }"
                    (click)="onMenuClick(hm)"
                    >{{ hm.displayName }}
                    <span
                      *ngIf="(isMobileResolution && hm.children) || hm.viewType === 'ALL'"
                      [ngClass]="{
                        'parent-menu': (isMobileResolution || hm.viewType === 'ALL') && hm.children
                      }"
                      class="caret"
                    ></span
                  ></a> -->

                  <ng-container *ngIf="
                      isMobileResolution && hm.children && openedMenuItem?.uniqueId === hm.uniqueId
                    ">
                    <ul class="dropdown-menu show">
                      <li *ngFor="let menuItem of hm.children; let i = index">
                        <a routerLink="Javascript:void(0)" class="nav-item" (click)="onChildMenuClick(menuItem)">{{
                          menuItem.displayName }}</a>
                      </li>
                    </ul>
                  </ng-container>

                  <ng-cotainer *ngIf="
                      hm.viewType === 'ALL' &&
                      !isMobileResolution &&
                      openedMenuItem?.uniqueId === hm.uniqueId
                    ">
                    <div class="sub-menu">
                      <div class="sub-menu dropdown-content container">
                        <div class="sub-menu px-5">
                          <div class="sub-menu-element sub-menu-title text-left">
                            <h2 class="sub-menu-element">SkillStudio</h2>
                          </div>
                          <div class="d-flex">
                            <div class="col-lg-6 pl-0">
                              <ul class="sub-menu pr-5">
                                <li class="sub-menu-element nav-item" *ngFor="
                                    let sm of hm.children
                                      | slice: 0:math.ceil(hm.children.length / 2)
                                  " (click)="onChildMenuClick(sm)">
                                  <div class="sub-menu-element icon">
                                    <span class="sub-menu-element"
                                      [ngClass]="sm.uniqueId.toLowerCase() + '-menu-icon'"></span>
                                  </div>
                                  <h3 class="sub-menu-element">{{ sm.displayName }}</h3>
                                  <span class="sub-menu-element">{{ sm.desc }}</span>
                                </li>
                              </ul>
                            </div>
                            <div class="col-lg-6">
                              <ul class="sub-menu pr-5">
                                <li class="sub-menu-element nav-item" *ngFor="
                                    let sm of hm.children
                                      | slice: math.ceil(hm.children.length / 2):hm.children.length
                                  " (click)="onChildMenuClick(sm)">
                                  <div class="sub-menu-element icon">
                                    <span [ngClass]="sm.uniqueId.toLowerCase() + '-menu-icon'"></span>
                                  </div>
                                  <h3 class="sub-menu-element">{{ sm.displayName }}</h3>
                                  <span class="sub-menu-element">{{ sm.desc }}</span>
                                </li>
                              </ul>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-cotainer>
                </li>
              </ng-container>
            </ul>
            <!-- Mobile Menu -->
            <div class="mobile-menu" *ngIf="isMobileResolution">
              <ul>
                <li><a routerLink="/mission">Home</a>
                  <ul class="mobile-submenu">
                    <li><a routerLink="/" class="mobile-menu-skill"><span>SkillStudio</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-feeds"><span>Feeds</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-llm"><span>LLM-Hub</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-events"><span>Events</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-marketplace"><span>MarketPlace</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-insights"><span>Insights</span></a></li>
                  </ul>
                </li>
                

                <li><a routerLink="/">Skill Studio</a>
                  <ul class="mobile-submenu">
                    <li><a routerLink="/" class="mobile-menu-course"><span>Courses</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-tekbyte"><span>Tekbytes</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-weekly-digest"><span>Weekly Digest</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-interview"><span>Interview Prep</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-video"><span>Video Library</span></a></li>
                    <li><a routerLink="/" class="mobile-menu-research"><span>Research Papers</span></a></li>
                  </ul></li>
                <li><a routerLink="/">Why TekCapsule</a></li>
                <li><a routerLink="/">About us</a></li>
                <li><a routerLink="/">Community</a></li>
                <li><a routerLink="/">FAQ</a></li>
                <li>
                  <a routerLink="https://tekcapsule.blog/" target="_blank">Blog</a>
                </li>

              </ul>
            </div>
          </div>
        </nav>


        <div class="d-flex" *ngIf="!isMobileResolution">
          <div class="header-search-box mr-3">
            <input type="text" class="search-input" placeholder="Start Looking For Something!" />
            <a class="search-btn" routerLink="#">
              <img src="../../../../assets/images/search-icon.svg" alt="Search" />
            </a>
          </div>
          <!-- <div class="global-search-box mr-3">
            <input type="text" placeholder="What are you looking for?" class="mb-0" />
            <button title="search bar" class="search-btn mr-3"></button>
          </div> -->
          <button mat-raised-button class="button primary-outline" routerLink="/subscribe">
            Subscribe
          </button>
        </div>
      </div>
    </div>
  </header>
</div>
<!-- End Header -->