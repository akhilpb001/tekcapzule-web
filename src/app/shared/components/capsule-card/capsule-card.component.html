<div class="capsule-card-container card" *ngIf="capsule">
  <div class="card-flipper back-flipped" [class.front-flipped]="isCardFlipped" [class.back-flipped]="!isCardFlipped">
    <div class="capsule-card card-front">
      <div class="card-head">
        <div class="icons bookmark" *ngIf="canShowBookmark()">
          <img src="/assets/images/bookmark-filled.svg" class="rounded-img" *ngIf="isBookmarked()"
            (click)="onCapsuleBookmarkRemove()" />
          <img src="/assets/images/bookmark-icon.svg" class="rounded-img" *ngIf="!isBookmarked()"
            (click)="onCapsuleBookmark()" />
        </div>
        <div class="icons okHand">
          <img *ngIf="!isCapsuleRecommended" class="rounded-img" src="/assets/images/okhand-icon.svg"
            (click)="onCapsuleRecommend()" />
          <img *ngIf="isCapsuleRecommended" class="rounded-img" src="/assets/images/okhand-icon-active.svg" />
        </div>
        <div class="icons timer">
          <img src="/assets/images/timer.svg" class="rounded-img" /><span>{{ capsule.duration }} mins</span>
        </div>
        <div class="icons labelRed">
          <span>#{{ capsule.topicCode }}</span>
        </div>
        <img [src]="capsule.imageUrl" class="header-image" alt="" (click)="onCardClick()" />
      </div>
      <div class="card-content">
        <div class="title" (click)="onCardClick()">
          {{ capsule.title }}
          <p class="pb">
            by {{ capsule.author }} <span>({{ capsule.publishedDate }})</span>
          </p>
        </div>
        <div class="description" (click)="onCardClick()">
          <p>
            {{ capsule.description }}
          </p>
        </div>
        <div class="card-footer d-flex justify-content-between">
          <img src="/assets/images/article-icon.svg" class="float-left" />
          <div class="float-right d-flex">
            <button mat-stroked-button class="button secondary-btn-sm" (click)="doFlipCard()">
              Read Highlights<span class="flip-icon"></span>
            </button>
            <button mat-stroked-button class="button secondary-btn-sm ml-2" (click)="onShareClick()">
              Share <span class="share-icon"></span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="capsule-card card-back">
      <div class="card-content flip-card mt-4">
        <div class="title">{{ capsule.title }}</div>
        <div class="description">
          <label>
            <img src="/assets/images/eye-icon.svg" />
            <span>{{ capsule.views }}</span>
          </label>
          <label>
            <img src="/assets/images/bookmark-filled.svg" *ngIf="isBookmarked()" (click)="onCapsuleBookmarkRemove()" />
            <img src="/assets/images/bookmark-icon.svg" *ngIf="!isBookmarked()" (click)="onCapsuleBookmark()" />
            <span>{{ capsule.bookmarks }}</span>
          </label>
          <label>
            <img src="/assets/images/okhand-icon.svg" />
            <span>{{ capsule.recommendations }}</span>
          </label>
          <!-- <div class="tags-input">
            <label>Tags</label>
            <div class="tags-label">
              <ng-container *ngFor="let tag of capsule.tags">
                <label class="tags">#{{ tag }}</label>
              </ng-container>
            </div>
          </div> -->
          <div class="key-points">
            <p class="flip-title">Key Points</p>
            <ul class="key-points-list">
              <li>Sed ut perspiciatis unde omnis steomnstesteomn steomnsteomn</li>
              <li>Sed ut perspiciatis unde omnis steomnstesteomn</li>
              <li>Sed ut perspiciatis unde omnis steomnstesteomn steomnsteomn</li>
              <li>Sed ut perspiciatis unde omnis steomnstesteomn steomnsteomn</li>
            </ul>
          </div>
          <div class="shield mb-4 pt-2">
            <ng-container *ngFor="let url of getCapsuleBadgeUrls()">
              <img [src]="url" alt="" />
            </ng-container>
          </div>

        </div>
        <div class="card-footer d-flex justify-content-between">
          <button class="button primary-btn-sm mb-3 d-flex" (click)="onCardClick()">
            <span [ngClass]="capsule.type === 'VIDEO' ? 'video-icon' : 'book-icon'"></span> {{capsule.type === 'VIDEO' ? 'Watch Now' : 'Start Reading'}}
          </button>
          <div class="float-right d-flex">
            <button mat-stroked-button class="button secondary-btn-sm" (click)="doFlipCard()">
              Flip<span class="flip-icon"></span>
            </button>
            <button mat-stroked-button class="button secondary-btn-sm ml-2" (click)="onShareClick()">
              Share <span class="share-icon"></span>
            </button>
            
          </div>
        </div>
      </div>
    </div>
  </div>
</div>